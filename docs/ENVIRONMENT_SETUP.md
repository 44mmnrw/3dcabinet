# üåç Environment Map ‚Äî –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏ –æ—Ç—Ä–∞–∂–µ–Ω–∏–π

## –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ

### ‚úÖ RoomEnvironment –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω
**–î–æ**: –ü—Ä–æ—Å—Ç–æ–π —Å–µ—Ä—ã–π –≥—Ä–∞–¥–∏–µ–Ω—Ç (–ø–ª–æ—Å–∫–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ –±–µ–∑ –¥–µ—Ç–∞–ª–µ–π)  
**–ü–æ—Å–ª–µ**: –í–∏—Ä—Ç—É–∞–ª—å–Ω–∞—è —Å—Ç—É–¥–∏—è —Å —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–º –æ—Å–≤–µ—â–µ–Ω–∏–µ–º –∏ –æ—Ç—Ä–∞–∂–µ–Ω–∏—è–º–∏

```javascript
// –°—Ç–∞—Ä—ã–π –∫–æ–¥ (—É–ø—Ä–æ—â—ë–Ω–Ω—ã–π –≥—Ä–∞–¥–∏–µ–Ω—Ç):
const pmremGenerator = new THREE.PMREMGenerator(this.renderer);
const gradientScene = new THREE.Scene();
gradientScene.background = new THREE.Color(0xcccccc);
const envMap = pmremGenerator.fromScene(gradientScene).texture;

// –ù–æ–≤—ã–π –∫–æ–¥ (RoomEnvironment –∏–∑ Three.js examples):
import { RoomEnvironment } from '../libs/RoomEnvironment.js';
const roomEnvironment = new RoomEnvironment(this.renderer);
const envMap = pmremGenerator.fromScene(roomEnvironment).texture;
this.scene.environment = envMap;
```

### ‚úÖ envMapIntensity —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –Ω–∞ –º–∞—Ç–µ—Ä–∏–∞–ª–∞—Ö
**–§–∞–π–ª**: `public/js/modules/CabinetModel.js` (—Å—Ç—Ä–æ–∫–∏ 233-240)

```javascript
// –ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –º–æ–¥–µ–ª–∏ –∫–∞–∂–¥–æ–º—É –º–∞—Ç–µ—Ä–∏–∞–ª—É —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è:
if (mat.envMapIntensity === undefined) {
    mat.envMapIntensity = 1.0;  // 100% –∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç—å –æ—Ç—Ä–∞–∂–µ–Ω–∏–π
}
```

### ‚úÖ GUI-–∫–æ–Ω—Ç—Ä–æ–ª—å –¥–æ–±–∞–≤–ª–µ–Ω
**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ**: GUI ‚Üí Rendering ‚Üí Environment (—Å–ª–∞–π–¥–µ—Ä 0-3.0)

```javascript
// –í SceneManager.js (—Å—Ç—Ä–æ–∫–∏ 517-530):
renderFolder.add(this.guiState, 'envIntensity', 0, 3.0, 0.1)
    .name('Environment')
    .onChange((value) => {
        // –û–±–Ω–æ–≤–ª—è–µ–º –≤—Å–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã –≤ —Å—Ü–µ–Ω–µ
        this.scene.traverse((obj) => {
            if (obj.isMesh && obj.material) {
                materials.forEach(mat => {
                    mat.envMapIntensity = value;
                });
            }
        });
    });
```

---

## –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å

### 1. –û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É
```powershell
# –í –±—Ä–∞—É–∑–µ—Ä–µ:
Ctrl + Shift + R  (–∂—ë—Å—Ç–∫–∞—è –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ —Å –æ—á–∏—Å—Ç–∫–æ–π –∫–µ—à–∞)
```

### 2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞
**–û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥** (DevTools ‚Üí Console):
```
üé¨ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ—Å–≤–µ—â–µ–Ω–∏—è —Å—Ü–µ–Ω—ã...
üåç Environment: RoomEnvironment (—Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–µ –æ—Ç—Ä–∞–∂–µ–Ω–∏—è)
‚úÖ –û—Å–≤–µ—â–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ: –ú—è–≥–∫–∏–π —Ä–µ–∂–∏–º (–∫–ª—é—á–µ–≤–æ–π —Å–≤–µ—Ç: 0.8)
```

**–ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ –æ—à–∏–±–∫—É –∏–º–ø–æ—Ä—Ç–∞**:
```
Failed to load module script: Expected a JavaScript module script but the server responded with a MIME type of "text/html"
```
‚Üí –§–∞–π–ª `RoomEnvironment.js` –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω –∏–ª–∏ –ø—É—Ç—å –Ω–µ–≤–µ—Ä–Ω—ã–π. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `public/js/libs/RoomEnvironment.js` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç.

### 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –æ—Ç—Ä–∞–∂–µ–Ω–∏—è –Ω–∞ –º–æ–¥–µ–ª–∏
- **–ú–µ—Ç–∞–ª–ª–∏—á–µ—Å–∫–∏–µ –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–∏** (—Å—Ç–æ–π–∫–∏, –ø–µ—Ç–ª–∏) –¥–æ–ª–∂–Ω—ã –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –æ–∫—Ä—É–∂–µ–Ω–∏–µ
- **–ì–ª—è–Ω—Ü–µ–≤—ã–µ –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–∏** (–¥–≤–µ—Ä–∏ —Å –ª–∞–∫–æ–º) –¥–æ–ª–∂–Ω—ã –∏–º–µ—Ç—å –º—è–≥–∫–∏–µ –±–ª–∏–∫–∏
- **–ú–∞—Ç–æ–≤—ã–µ –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–∏** (–º–µ—Ç–∞–ª–ª —Å roughness) –∏–º–µ—é—Ç —Å–ª–∞–±—ã–µ –æ—Ç—Ä–∞–∂–µ–Ω–∏—è

### 4. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç—å —á–µ—Ä–µ–∑ GUI
**–û—Ç–∫—Ä–æ–π—Ç–µ GUI** (–ø—Ä–∞–≤—ã–π –≤–µ—Ä—Ö–Ω–∏–π —É–≥–æ–ª) ‚Üí **Rendering** ‚Üí **Environment**

| –ó–Ω–∞—á–µ–Ω–∏–µ | –≠—Ñ—Ñ–µ–∫—Ç | –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å |
|----------|--------|-------------------|
| **0.0** | –û—Ç—Ä–∞–∂–µ–Ω–∏–π –Ω–µ—Ç (–º–∞—Ç–æ–≤—ã–π –≤–∏–¥) | –î–µ—Ä–µ–≤–æ, –ø–ª–∞—Å—Ç–∏–∫, –º–∞—Ç–æ–≤—ã–π –º–µ—Ç–∞–ª–ª |
| **0.5** | –°–ª–∞–±—ã–µ –æ—Ç—Ä–∞–∂–µ–Ω–∏—è | –°–ª–µ–≥–∫–∞ –≥–ª—è–Ω—Ü–µ–≤—ã–µ –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–∏ |
| **1.0** | ‚úÖ –ù–æ—Ä–º–∞–ª—å–Ω—ã–µ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) | –ú–µ—Ç–∞–ª–ª, —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ª–∞–∫ |
| **2.0** | –°–∏–ª—å–Ω—ã–µ –æ—Ç—Ä–∞–∂–µ–Ω–∏—è | –ü–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –º–µ—Ç–∞–ª–ª, –∑–µ—Ä–∫–∞–ª–∞ |
| **3.0** | –û—á–µ–Ω—å —Å–∏–ª—å–Ω—ã–µ (–∑–µ—Ä–∫–∞–ª—å–Ω—ã–µ) | –•—Ä–æ–º, —Å—Ç–µ–∫–ª–æ |

---

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### RoomEnvironment ‚Äî —á—Ç–æ —ç—Ç–æ?
–ö–ª–∞—Å—Å –∏–∑ **Three.js r158** (–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π –ø—Ä–∏–º–µ—Ä):
- –°–æ–∑–¥–∞—ë—Ç –≤–∏—Ä—Ç—É–∞–ª—å–Ω—É—é –∫–æ–º–Ω–∞—Ç—É-—Å—Ç—É–¥–∏—é —Å –æ—Å–≤–µ—â–µ–Ω–∏–µ–º
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ glTF Viewer –¥–ª—è —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã—Ö PBR-–º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤
- –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç environment map —á–µ—Ä–µ–∑ PMREMGenerator
- **–†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞**: 6KB (149 —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞)

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ RoomEnvironment**:
```javascript
// –°–æ–∑–¥–∞—ë—Ç —Å—Ü–µ–Ω—É —Å:
- –ü–æ–ª (MeshStandardMaterial, –±–µ–ª—ã–π)
- –°—Ç–µ–Ω—ã (BoxGeometry, —Å–≤–µ—Ç–ª–æ-—Å–µ—Ä—ã–µ)
- –ü–æ—Ç–æ–ª–æ–∫ (–≤–µ—Ä—Ö–Ω—è—è —Å—Ç–µ–Ω–∫–∞)
- 4 PointLight (–æ—Å–≤–µ—â–µ–Ω–∏–µ –ø–æ —É–≥–ª–∞–º)
```

### envMapIntensity ‚Äî –∫–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç?
**–ü–∞—Ä–∞–º–µ—Ç—Ä Material.envMapIntensity** (–¥–∏–∞–ø–∞–∑–æ–Ω 0-‚àû, –æ–±—ã—á–Ω–æ 0-3):
- **0**: Environment map –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è (–æ—Ç—Ä–∞–∂–µ–Ω–∏–π –Ω–µ—Ç)
- **1**: 100% –∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç—å (–æ—Ç—Ä–∞–∂–µ–Ω–∏—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç roughness)
- **>1**: –£—Å–∏–ª–µ–Ω–Ω—ã–µ –æ—Ç—Ä–∞–∂–µ–Ω–∏—è (—è—Ä—á–µ —á–µ–º –æ–∫—Ä—É–∂–µ–Ω–∏–µ)

**–§–æ—Ä–º—É–ª–∞**:
```
finalReflection = environmentMap * envMapIntensity * (1 - roughness)
```

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç roughness**:
- `roughness = 0.0` (–≥–ª–∞–¥–∫–∏–π –º–µ—Ç–∞–ª–ª) ‚Üí —á—ë—Ç–∫–∏–µ –æ—Ç—Ä–∞–∂–µ–Ω–∏—è
- `roughness = 0.5` (–º–∞—Ç–æ–≤—ã–π –º–µ—Ç–∞–ª–ª) ‚Üí —Ä–∞–∑–º—ã—Ç—ã–µ –æ—Ç—Ä–∞–∂–µ–Ω–∏—è
- `roughness = 1.0` (–ø–æ–ª–Ω–æ—Å—Ç—å—é –º–∞—Ç–æ–≤—ã–π) ‚Üí –æ—Ç—Ä–∞–∂–µ–Ω–∏–π –ø–æ—á—Ç–∏ –Ω–µ—Ç

### PMREMGenerator ‚Äî –∑–∞—á–µ–º –Ω—É–∂–µ–Ω?
**PMREM** = Prefiltered Mipmap Radiance Environment Map

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç**:
1. –ë–µ—Ä—ë—Ç —Å—Ü–µ–Ω—É (RoomEnvironment)
2. –†–µ–Ω–¥–µ—Ä–∏—Ç –µ—ë –≤ –∫—É–±–∏—á–µ—Å–∫—É—é –∫–∞—Ä—Ç—É (CubeMap)
3. –°–æ–∑–¥–∞—ë—Ç mipmap-—Ü–µ–ø–æ—á–∫—É —Å —Ä–∞–∑–Ω–æ–π —Ä–∞–∑–º—ã—Ç–æ—Å—Ç—å—é
4. –ü—Ä–∏–º–µ–Ω—è–µ—Ç GGX BRDF —Ñ–∏–ª—å—Ç—Ä –¥–ª—è PBR
5. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç `.texture` –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∫–∞–∫ `scene.environment`

**–ó–∞—á–µ–º**:
- –£—Å–∫–æ—Ä—è–µ—Ç —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ (–ø—Ä–µ–¥—Ä–∞—Å—á–∏—Ç–∞–Ω–Ω–∞—è —Ä–∞–∑–º—ã—Ç–æ—Å—Ç—å)
- –ö–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ PBR-–æ—Ç—Ä–∞–∂–µ–Ω–∏—è (—Ñ–∏–∑–∏—á–µ—Å–∫–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ)
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–Ω—ã—Ö —É—Ä–æ–≤–Ω–µ–π roughness –±–µ–∑ –ø–µ—Ä–µ—Å—á—ë—Ç–∞

---

## –°—Ä–∞–≤–Ω–µ–Ω–∏–µ: –ì—Ä–∞–¥–∏–µ–Ω—Ç vs RoomEnvironment

### –î–æ (—Å–µ—Ä—ã–π –≥—Ä–∞–¥–∏–µ–Ω—Ç)
```javascript
// ‚ùå –ü—Ä–æ–±–ª–µ–º—ã:
- –ü–ª–æ—Å–∫–æ–µ –æ—Å–≤–µ—â–µ–Ω–∏–µ (–æ–¥–∏–Ω —Ü–≤–µ—Ç)
- –û—Ç—Ä–∞–∂–µ–Ω–∏—è –Ω–µ–≤—ã—Ä–∞–∑–∏—Ç–µ–ª—å–Ω—ã–µ
- –ù–µ—Ç –¥–µ—Ç–∞–ª–µ–π –æ–∫—Ä—É–∂–µ–Ω–∏—è
- PBR-–º–∞—Ç–µ—Ä–∏–∞–ª—ã –≤—ã–≥–ª—è–¥—è—Ç —É–ø—Ä–æ—â—ë–Ω–Ω–æ
```

### –ü–æ—Å–ª–µ (RoomEnvironment)
```javascript
// ‚úÖ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:
- –û–±—ä—ë–º–Ω–æ–µ –æ—Å–≤–µ—â–µ–Ω–∏–µ (–∫–æ–º–Ω–∞—Ç–∞ + 4 –∏—Å—Ç–æ—á–Ω–∏–∫–∞ —Å–≤–µ—Ç–∞)
- –î–µ—Ç–∞–ª—å–Ω—ã–µ –æ—Ç—Ä–∞–∂–µ–Ω–∏—è (—Å—Ç–µ–Ω—ã, –ø–æ–ª, –ø–æ—Ç–æ–ª–æ–∫)
- –†–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–µ –±–ª–∏–∫–∏ –Ω–∞ –º–µ—Ç–∞–ª–ª–µ
- PBR-–º–∞—Ç–µ—Ä–∏–∞–ª—ã —Ä–∞—Å–∫—Ä—ã–≤–∞—é—Ç—Å—è –ø–æ–ª–Ω–æ—Å—Ç—å—é
```

**–í–∏–∑—É–∞–ª—å–Ω—ã–µ –æ—Ç–ª–∏—á–∏—è**:
| –ü–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç—å | –ì—Ä–∞–¥–∏–µ–Ω—Ç | RoomEnvironment |
|------------|----------|----------------|
| **–ú–µ—Ç–∞–ª–ª** | –û–¥–Ω–æ—Ü–≤–µ—Ç–Ω—ã–π –±–ª–∏–∫ | –û—Ç—Ä–∞–∂–µ–Ω–∏–µ —Å—Ç–µ–Ω/–ø–æ–ª–∞ |
| **–°—Ç–µ–∫–ª–æ** | –°–ª–∞–±—ã–π –±–ª–∏–∫ | –ß—ë—Ç–∫–æ–µ –æ—Ç—Ä–∞–∂–µ–Ω–∏–µ –∫–æ–º–Ω–∞—Ç—ã |
| **–õ–∞–∫** | –†–∞–∑–º—ã—Ç–æ–µ –ø—è—Ç–Ω–æ | –ú—è–≥–∫–∏–µ –æ—Ç—Ä–∞–∂–µ–Ω–∏—è —Å–≤–µ—Ç–∞ |

---

## –û—Ç–ª–∞–¥–∫–∞

### –ü—Ä–æ–±–ª–µ–º–∞: "–û—Ç—Ä–∞–∂–µ–Ω–∏–π –≤—Å—ë —Ä–∞–≤–Ω–æ –Ω–µ—Ç"

**–ß–µ–∫-–ª–∏—Å—Ç**:
1. ‚úÖ `RoomEnvironment.js` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ `public/js/libs/`
2. ‚úÖ –ò–º–ø–æ—Ä—Ç –≤ SceneManager.js: `import { RoomEnvironment } from '../libs/RoomEnvironment.js';`
3. ‚úÖ –ö–æ–Ω—Å–æ–ª—å –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç: `üåç Environment: RoomEnvironment`
4. ‚úÖ GUI-—Å–ª–∞–π–¥–µ—Ä Environment —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω ‚â• 1.0
5. ‚úÖ –ú–∞—Ç–µ—Ä–∏–∞–ª—ã –∏–º–µ—é—Ç `mat.envMapIntensity = 1.0`

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –º–∞—Ç–µ—Ä–∏–∞–ª –≤ DevTools**:
```javascript
// –û—Ç–∫—Ä–æ–π—Ç–µ Console –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
const mesh = app.sceneManager.scene.children.find(c => c.isMesh);
const mat = mesh.material;
console.log('envMapIntensity:', mat.envMapIntensity);  // –î–æ–ª–∂–Ω–æ –±—ã—Ç—å 1.0
console.log('roughness:', mat.roughness);  // –ï—Å–ª–∏ 1.0, –æ—Ç—Ä–∞–∂–µ–Ω–∏–π –Ω–µ –±—É–¥–µ—Ç
console.log('metalness:', mat.metalness);  // –î–æ–ª–∂–Ω–æ –±—ã—Ç—å > 0 –¥–ª—è –º–µ—Ç–∞–ª–ª–∞
```

### –ü—Ä–æ–±–ª–µ–º–∞: "–û—Ç—Ä–∞–∂–µ–Ω–∏—è —Å–ª–∏—à–∫–æ–º —Å–∏–ª—å–Ω—ã–µ"
‚Üí **–†–µ—à–µ–Ω–∏–µ**: GUI ‚Üí Rendering ‚Üí Environment ‚Üí —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ 0.5

### –ü—Ä–æ–±–ª–µ–º–∞: "–û—Ç—Ä–∞–∂–µ–Ω–∏—è —Å–ª–∏—à–∫–æ–º —Å–ª–∞–±—ã–µ"
‚Üí **–†–µ—à–µ–Ω–∏–µ**: GUI ‚Üí Rendering ‚Üí Environment ‚Üí —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ 2.0

### –ü—Ä–æ–±–ª–µ–º–∞: "–û—à–∏–±–∫–∞ –∏–º–ø–æ—Ä—Ç–∞ RoomEnvironment"
```
Uncaught SyntaxError: Cannot use import statement outside a module
```
‚Üí **–ü—Ä–∏—á–∏–Ω–∞**: –ò–º–ø–æ—Ä—Ç `from 'three'` –Ω–µ –∏–∑–º–µ–Ω—ë–Ω –Ω–∞ `from './three.module.js'`

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–∞–π–ª** `public/js/libs/RoomEnvironment.js` (—Å—Ç—Ä–æ–∫–∞ 13):
```javascript
// ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ:
import { ... } from 'three';

// ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ:
import { ... } from './three.module.js';
```

---

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### –ï—Å–ª–∏ –æ—Ç—Ä–∞–∂–µ–Ω–∏—è —Ä–∞–±–æ—Ç–∞—é—Ç ‚úÖ
1. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ Environment —á–µ—Ä–µ–∑ GUI –ø–æ –≤–∫—É—Å—É (0.5-2.0)
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–µ–Ω–∏ –Ω–∞ –ø–æ–ª—É (–¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤–∏–¥–Ω—ã)
3. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ lighting presets (GUI ‚Üí Lighting ‚Üí 5 –∫–Ω–æ–ø–æ–∫)

### –ï—Å–ª–∏ –Ω—É–∂–Ω–∞ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
**–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ RoomEnvironment** (–¥–ª—è –æ–ø—ã—Ç–Ω—ã—Ö):
```javascript
// public/js/libs/RoomEnvironment.js (—Å—Ç—Ä–æ–∫–∏ 80-100)
// –ò–∑–º–µ–Ω–∏—Ç–µ —Ü–≤–µ—Ç —Å—Ç–µ–Ω:
material.color.setHex(0xffffff);  // –ë–µ–ª—ã–µ —Å—Ç–µ–Ω—ã

// –ò–ª–∏ –∏–∑–º–µ–Ω–∏—Ç–µ –∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç—å —Å–≤–µ—Ç–∏–ª—å–Ω–∏–∫–æ–≤:
light.intensity = 2.0;  // –Ø—Ä—á–µ (–±—ã–ª–æ 1.0)
```

---

## –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

**Three.js –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**:
- [PMREMGenerator](https://threejs.org/docs/#api/en/extras/PMREMGenerator)
- [Material.envMapIntensity](https://threejs.org/docs/#api/en/materials/MeshStandardMaterial.envMapIntensity)
- [Scene.environment](https://threejs.org/docs/#api/en/scenes/Scene.environment)

**–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è**:
- [Three.js glTF Viewer](https://gltf-viewer.donmccurdy.com/) ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ—Ç RoomEnvironment
- [Three.js Editor](https://threejs.org/editor/) ‚Äî –∞–Ω–∞–ª–æ–≥–∏—á–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

---

## –ò—Ç–æ–≥–æ–≤–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

**SceneManager.js** (—Å—Ç—Ä–æ–∫–∏ 403-428):
```javascript
// Environment map —Å —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–º –æ–∫—Ä—É–∂–µ–Ω–∏–µ–º
console.log('üåç Environment: RoomEnvironment (—Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–µ –æ—Ç—Ä–∞–∂–µ–Ω–∏—è)');
const roomEnvironment = new RoomEnvironment(this.renderer);
const pmremGenerator = new THREE.PMREMGenerator(this.renderer);
const envMap = pmremGenerator.fromScene(roomEnvironment).texture;
this.scene.environment = envMap;
this.environmentMap = envMap;
pmremGenerator.dispose();
roomEnvironment.dispose();
```

**CabinetModel.js** (—Å—Ç—Ä–æ–∫–∏ 233-240):
```javascript
// –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º envMapIntensity –¥–ª—è –≤—Å–µ—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤
if (mat.envMapIntensity === undefined) {
    mat.envMapIntensity = 1.0;
}
```

**GUI Control** (SceneManager.js, —Å—Ç—Ä–æ–∫–∏ 517-530):
```javascript
// –°–ª–∞–π–¥–µ—Ä Environment –≤ –ø–∞–ø–∫–µ Rendering
renderFolder.add(this.guiState, 'envIntensity', 0, 3.0, 0.1)
    .name('Environment')
    .onChange((value) => { /* –æ–±–Ω–æ–≤–ª—è–µ–º –º–∞—Ç–µ—Ä–∏–∞–ª—ã */ });
```

‚úÖ **–ì–æ—Ç–æ–≤–æ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é!**
