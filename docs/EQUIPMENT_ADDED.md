# üîå –î–æ–±–∞–≤–ª–µ–Ω–æ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ –Ω–∞ —Å—Ü–µ–Ω—É

## ‚úÖ –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ

### 1. –ò–º–ø–æ—Ä—Ç—ã (—Å—Ç—Ä–æ–∫–∏ 9-15)
–î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∏–º–ø–æ—Ä—Ç—ã:
```javascript
import { GLTFLoader } from '../libs/GLTFLoader.js';
import * as THREE from '../libs/three.module.js';
```

### 2. –í—ã–∑–æ–≤ –∑–∞–≥—Ä—É–∑–∫–∏ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è (—Å—Ç—Ä–æ–∫–∞ 249)
–í –º–µ—Ç–æ–¥ `loadTestCabinet()` –¥–æ–±–∞–≤–ª–µ–Ω –≤—ã–∑–æ–≤:
```javascript
console.log('üîå –ó–∞–≥—Ä—É–∑–∫–∞ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è...');
await this.loadTestEquipment(cabinet);
```

### 3. –ù–æ–≤—ã–π –º–µ—Ç–æ–¥ `loadTestEquipment()` (—Å—Ç—Ä–æ–∫–∏ 268-325)
–ó–∞–≥—Ä—É–∂–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–∫–ª—é—á–∞—Ç–µ–ª—å –∏ —Ä–∞–∑–º–µ—â–∞–µ—Ç –Ω–∞ –ø–µ—Ä–≤–æ–π DIN-—Ä–µ–π–∫–µ:

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç –º–µ—Ç–æ–¥:**
- ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ DIN-—Ä–µ–µ–∫ –≤ —à–∫–∞—Ñ—É
- ‚úÖ –ó–∞–≥—Ä—É–∂–∞–µ—Ç GLB-–º–æ–¥–µ–ª—å `/assets/models/equipment/circuit_breaker/circuit_breaker.glb`
- ‚úÖ –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç –¥–æ —Ä–µ–∞–ª—å–Ω–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞ (18–º–º ‚Äî 1 –º–æ–¥—É–ª—å DIN)
- ‚úÖ –†–∞–∑–º–µ—â–∞–µ—Ç –Ω–∞ –ø–µ—Ä–≤–æ–π DIN-—Ä–µ–π–∫–µ —á–µ—Ä–µ–∑ `cabinet.addEquipment()`
- ‚úÖ –õ–æ–≥–∏—Ä—É–µ—Ç –≤—Å–µ —ç—Ç–∞–ø—ã –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

---

## üéØ –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∑–∞–≥—Ä—É–∑–∫–∏:

1. **–ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è —à–∫–∞—Ñ** ‚Üí `loadTestCabinet()`
2. **–®–∫–∞—Ñ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –Ω–∞ —Å—Ü–µ–Ω—É** ‚Üí `cabinetManager.addCabinet()`
3. **–ü–æ–∏—Å–∫ DIN-—Ä–µ–µ–∫** ‚Üí –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤ `CabinetModel.findDinRails()`
4. **–ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ** ‚Üí `loadTestEquipment(cabinet)`
5. **–û–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç—Å—è** ‚Üí –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ —Ä–µ–∞–ª—å–Ω—ã–º —Ä–∞–∑–º–µ—Ä–∞–º
6. **–û–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ –∫—Ä–µ–ø–∏—Ç—Å—è –Ω–∞ —Ä–µ–π–∫—É** ‚Üí `cabinet.addEquipment(equipmentModel, 0)`

### –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ:
```javascript
const targetWidth = 18; // –º–º (1 –º–æ–¥—É–ª—å DIN ‚Äî —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —Ä–∞–∑–º–µ—Ä)
const bbox = new THREE.Box3().setFromObject(equipmentModel);
const size = new THREE.Vector3();
bbox.getSize(size);

const scaleFactor = targetWidth / size.x;
equipmentModel.scale.setScalar(scaleFactor);
```

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥–≥–æ–Ω—è–µ—Ç —Ä–∞–∑–º–µ—Ä –º–æ–¥–µ–ª–∏ –ø–æ–¥ 18–º–º (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è —à–∏—Ä–∏–Ω–∞ 1-–º–æ–¥—É–ª—å–Ω–æ–≥–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –≤—ã–∫–ª—é—á–∞—Ç–µ–ª—è).

---

## üöÄ –ü—Ä–æ–≤–µ—Ä–∫–∞

### –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:
```powershell
php artisan serve
```

–û—Ç–∫—Ä–æ–π—Ç–µ: **http://localhost:8000/app**

### –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ Console (F12):

**‚úÖ –£—Å–ø–µ—à–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞:**
```
üîå –ó–∞–≥—Ä—É–∑–∫–∞ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è...
üîÑ loadTestEquipment() –Ω–∞—á–∞—Ç –¥–ª—è cabinet: cabinet_xxxxx
üìÅ –ü—É—Ç—å –∫ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—é: /assets/models/equipment/circuit_breaker/circuit_breaker.glb
‚úÖ –û–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ –∑–∞–≥—Ä—É–∂–µ–Ω–æ: /assets/models/equipment/circuit_breaker/circuit_breaker.glb
üìè –ú–∞—Å—à—Ç–∞–± –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è: 0.XXXx
‚úÖ –û–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ –¥–æ–±–∞–≤–ª–µ–Ω–æ –Ω–∞ DIN-—Ä–µ–π–∫—É #0
```

**‚ö†Ô∏è –ï—Å–ª–∏ DIN-—Ä–µ–π–∫–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã:**
```
‚ö†Ô∏è DIN-—Ä–µ–π–∫–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã –≤ —à–∫–∞—Ñ—É, –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω–æ
```
**–ü—Ä–∏—á–∏–Ω–∞:** –í GLB-–º–æ–¥–µ–ª–∏ —à–∫–∞—Ñ–∞ –Ω–µ—Ç –æ–±—ä–µ–∫—Ç–æ–≤ —Å –∏–º–µ–Ω–∞–º–∏ "din", "rail", "DIN_Rail"
**–†–µ—à–µ–Ω–∏–µ:** –ü–µ—Ä–µ–∏–º–µ–Ω—É–π—Ç–µ DIN-—Ä–µ–π–∫–∏ –≤ Blender/FreeCAD –ø–µ—Ä–µ–¥ —ç–∫—Å–ø–æ—Ä—Ç–æ–º

**‚ùå –ï—Å–ª–∏ –æ—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏:**
```
‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è: [error details]
```
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Ñ–∞–π–ª —Å—É—â–µ—Å—Ç–≤—É–µ—Ç: `public/assets/models/equipment/circuit_breaker/circuit_breaker.glb`

---

## üé® –í–∏–∑—É–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞

### –í 3D-—Å—Ü–µ–Ω–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –≤–∏–¥–Ω–æ:
- ‚úÖ –®–∫–∞—Ñ (–∫–æ—Ä–∏—á–Ω–µ–≤—ã–π –º–µ—Ç–∞–ª–ª–∏—á–µ—Å–∫–∏–π –∫–æ—Ä–ø—É—Å)
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–∫–ª—é—á–∞—Ç–µ–ª—å –Ω–∞ DIN-—Ä–µ–π–∫–µ (–º–∞–ª–µ–Ω—å–∫–∏–π –æ–±—ä–µ–∫—Ç ~18–º–º)
- ‚úÖ –û–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ –ø—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω–æ –∫ —Ä–µ–π–∫–µ (–Ω–µ "–≤–∏—Å–∏—Ç –≤ –≤–æ–∑–¥—É—Ö–µ")

### –ü–æ–ª–æ–∂–µ–Ω–∏–µ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è:
- –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –±–µ—Ä—É—Ç—Å—è –∏–∑ `dinRails[0].position` (–ø–µ—Ä–≤–∞—è —Ä–µ–π–∫–∞)
- –°–º–µ—â–µ–Ω–∏–µ: `+50–º–º` –∑–∞ –∫–∞–∂–¥—ã–π –ø—Ä–µ–¥—ã–¥—É—â–∏–π —ç–ª–µ–º–µ–Ω—Ç (—Å–º. `CabinetModel.addEquipment()`)

---

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### –ò–∑–º–µ–Ω–∏—Ç—å —Ä–∞–∑–º–µ—Ä –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è:
–û—Ç–∫—Ä–æ–π—Ç–µ `configurator.js`, —Å—Ç—Ä–æ–∫–∞ ~300:
```javascript
const targetWidth = 18; // ‚Üê –ò–∑–º–µ–Ω–∏—Ç–µ –Ω–∞ –Ω—É–∂–Ω—ã–π —Ä–∞–∑–º–µ—Ä –≤ –º–º
```

**–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã –º–æ–¥—É–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ DIN:**
- 1 –º–æ–¥—É–ª—å = 18–º–º
- 2 –º–æ–¥—É–ª—è = 36–º–º
- 3 –º–æ–¥—É–ª—è = 54–º–º
- 4 –º–æ–¥—É–ª—è = 72–º–º

### –ò–∑–º–µ–Ω–∏—Ç—å —Ä–µ–π–∫—É –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏:
–°—Ç—Ä–æ–∫–∞ ~314:
```javascript
const success = cabinet.addEquipment(equipmentModel, 0); // ‚Üê 0 = –ø–µ—Ä–≤–∞—è —Ä–µ–π–∫–∞
```

–ò–Ω–¥–µ–∫—Å—ã —Ä–µ–µ–∫: `0, 1, 2, ...` (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –≤ –º–æ–¥–µ–ª–∏)

### –î–æ–±–∞–≤–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤:
```javascript
async loadTestEquipment(cabinet) {
    // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–∫–ª—é—á–∞—Ç–µ–ª—å –Ω–∞ —Ä–µ–π–∫–µ #0
    await this.loadEquipmentPiece(cabinet, '/assets/models/equipment/circuit_breaker/circuit_breaker.glb', 0, 18);
    
    // –£–ó–û –Ω–∞ —Ä–µ–π–∫–µ #0 (—É—Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è —Ä—è–¥–æ–º)
    await this.loadEquipmentPiece(cabinet, '/assets/models/equipment/rcd/rcd.glb', 0, 36);
    
    // –ö–ª–µ–º–º–Ω–∏–∫–∏ –Ω–∞ —Ä–µ–π–∫–µ #1
    await this.loadEquipmentPiece(cabinet, '/assets/models/equipment/terminal/terminal.glb', 1, 18);
}
```

---

## üìö –°–≤—è–∑–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### –ö–æ–¥:
- **`public/js/pages/configurator.js`** ‚Äî –≥–ª–∞–≤–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä (–¥–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ loadTestEquipment)
- **`public/js/modules/CabinetModel.js`** ‚Äî –º–µ—Ç–æ–¥ `addEquipment()` –¥–ª—è –∫—Ä–µ–ø–ª–µ–Ω–∏—è –Ω–∞ —Ä–µ–π–∫–∏

### –ú–æ–¥–µ–ª–∏:
- **`public/assets/models/equipment/circuit_breaker/circuit_breaker.glb`** ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–∫–ª—é—á–∞—Ç–µ–ª—å
- **`public/assets/models/thermocabinets/tsh_700_500_240/tsh_700_500_240.glb`** ‚Äî —à–∫–∞—Ñ

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:
- **`GLB_MODEL_GUIDE.md`** ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ –∏ —ç–∫—Å–ø–æ—Ä—Ç GLB-–º–æ–¥–µ–ª–µ–π
- **`3D_CONFIGURATOR_GUIDE.md`** ‚Äî —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ç–æ—Ä–∞

---

## üêõ Troubleshooting

### –û–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ –Ω–µ –≤–∏–¥–Ω–æ
**–ü—Ä–∏—á–∏–Ω—ã:**
1. –ú–æ–¥–µ–ª—å —Å–ª–∏—à–∫–æ–º –º–∞–ª–µ–Ω—å–∫–∞—è ‚Üí —É–≤–µ–ª–∏—á—å—Ç–µ `targetWidth`
2. –ú–æ–¥–µ–ª—å –≤–Ω—É—Ç—Ä–∏ —à–∫–∞—Ñ–∞ ‚Üí –æ—Ç–∫—Ä–æ–π—Ç–µ –¥–≤–µ—Ä—Ü—É –∏–ª–∏ –∏–∑–º–µ–Ω–∏—Ç–µ –ø–æ–∑–∏—Ü–∏—é
3. –ú–∞—Ç–µ—Ä–∏–∞–ª –ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π ‚Üí –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã –≤ GLB

**–†–µ—à–µ–Ω–∏–µ:**
```javascript
// –£–≤–µ–ª–∏—á–∏—Ç—å —Ä–∞–∑–º–µ—Ä
const targetWidth = 50; // –≤–º–µ—Å—Ç–æ 18

// –í–∫–ª—é—á–∏—Ç—å —Ç–µ–Ω–∏ –¥–ª—è –≤–∏–¥–∏–º–æ—Å—Ç–∏
equipmentModel.traverse(child => {
    if (child.isMesh) {
        child.castShadow = true;
        child.receiveShadow = true;
    }
});
```

### DIN-—Ä–µ–π–∫–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã
**–ü—Ä–∏—á–∏–Ω–∞:** –í GLB-–º–æ–¥–µ–ª–∏ –Ω–µ—Ç –æ–±—ä–µ–∫—Ç–æ–≤ —Å –∏–º–µ–Ω–∞–º–∏ "din", "rail"

**–†–µ—à–µ–Ω–∏–µ:**
1. –û—Ç–∫—Ä–æ–π—Ç–µ GLB –≤ Blender
2. –ü–µ—Ä–µ–∏–º–µ–Ω—É–π—Ç–µ –æ–±—ä–µ–∫—Ç—ã: `DIN_Rail_01`, `DIN_Rail_02`
3. –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ –∑–∞–Ω–æ–≤–æ

–ò–ª–∏ –∏–∑–º–µ–Ω–∏—Ç–µ –ø–æ–∏—Å–∫ –≤ `CabinetModel.js`:
```javascript
findDinRails() {
    const railNames = ['mounting_rail', 'shelf', 'bracket']; // ‚Üê –í–∞—à–∏ –∏–º–µ–Ω–∞
    // ...
}
```

### –û–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ –Ω–∞ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –ø–æ–∑–∏—Ü–∏–∏
**–ü—Ä–∏—á–∏–Ω–∞:** `addEquipment()` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–æ–∑–∏—Ü–∏—é –ø–µ—Ä–≤–æ–π —Ä–µ–π–∫–∏ + offset

**–†–µ—à–µ–Ω–∏–µ:** –ù–∞—Å—Ç—Ä–æ–π—Ç–µ offset –≤ `CabinetModel.js`, —Å—Ç—Ä–æ–∫–∞ ~585:
```javascript
const offset = this.equipment.filter(eq => eq.railIndex === railIndex).length * 50; // ‚Üê 50–º–º –∏–Ω—Ç–µ—Ä–≤–∞–ª
```

---

## ‚ú® –ì–æ—Ç–æ–≤–æ!

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–∫–ª—é—á–∞—Ç–µ–ª—å —Ç–µ–ø–µ—Ä—å –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –≤–º–µ—Å—Ç–µ —Å–æ —à–∫–∞—Ñ–æ–º –∏ —Ä–∞–∑–º–µ—â–∞–µ—Ç—Å—è –Ω–∞ –ø–µ—Ä–≤–æ–π DIN-—Ä–µ–π–∫–µ! üéâ

**–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:**
- –î–æ–±–∞–≤–∏—Ç—å UI –¥–ª—è –≤—ã–±–æ—Ä–∞ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è
- –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å drag-and-drop –¥–ª—è –ø–µ—Ä–µ—Å—Ç–∞–Ω–æ–≤–∫–∏
- –î–æ–±–∞–≤–∏—Ç—å —Å–Ω–∞–ø –∫ DIN-—Ä–µ–π–∫–µ –ø—Ä–∏ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–∏
