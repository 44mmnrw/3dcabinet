# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞—Å–≤–µ—Ç–∫–∏ –∏ –º–∏–≥–∞—é—â–∏—Ö –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤

## ‚ö†Ô∏è –ü—Ä–æ–±–ª–µ–º—ã

1. **–ó–∞—Å–≤–µ—á–µ–Ω–Ω–∞—è —Å—Ü–µ–Ω–∞** ‚Äî —Å–ª–∏—à–∫–æ–º —è—Ä–∫–æ–µ –æ—Å–≤–µ—â–µ–Ω–∏–µ
2. **–ú–∏–≥–∞—é—â–∏–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã** (z-fighting) ‚Äî –º–µ—Ä—Ü–∞–Ω–∏–µ –Ω–∞ –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç—è—Ö –º–æ–¥–µ–ª–∏

---

## ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã)

### 1Ô∏è‚É£ –°–Ω–∏–∂–µ–Ω–∞ —ç–∫—Å–ø–æ–∑–∏—Ü–∏—è (—É–±–∏—Ä–∞–µ—Ç –∑–∞—Å–≤–µ—Ç–∫—É)

**–ë—ã–ª–æ**:
```javascript
this.renderer.toneMappingExposure = 1.0;  // –°–ª–∏—à–∫–æ–º —è—Ä–∫–æ
```

**–°—Ç–∞–ª–æ**:
```javascript
this.renderer.toneMappingExposure = 0.8;  // –û–ø—Ç–∏–º–∞–ª—å–Ω–æ –¥–ª—è ACESFilmic
```

**–≠—Ñ—Ñ–µ–∫—Ç**: –°—Ü–µ–Ω–∞ –Ω–∞ 20% —Ç–µ–º–Ω–µ–µ, –±–µ–∑ –ø–µ—Ä–µ—Å–≤–µ—Ç–æ–≤.

---

### 2Ô∏è‚É£ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω shadow bias (—É–±–∏—Ä–∞–µ—Ç –º–µ—Ä—Ü–∞–Ω–∏–µ —Ç–µ–Ω–µ–π)

**–ë—ã–ª–æ**:
```javascript
keyLight.shadow.bias = -0.0001;           // –°–ª–∏—à–∫–æ–º –º–∞–ª–æ ‚Üí –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã
keyLight.shadow.camera.near = 1;          // –°–ª–∏—à–∫–æ–º –±–ª–∏–∑–∫–æ
```

**–°—Ç–∞–ª–æ**:
```javascript
keyLight.shadow.bias = -0.001;            // –í 10 —Ä–∞–∑ –±–æ–ª—å—à–µ
keyLight.shadow.normalBias = 0.05;        // –î–æ–±–∞–≤–ª–µ–Ω–æ (—É–±–∏—Ä–∞–µ—Ç shadow acne)
keyLight.shadow.camera.near = 100;        // –£–≤–µ–ª–∏—á–µ–Ω–æ –≤ 100 —Ä–∞–∑
```

**–≠—Ñ—Ñ–µ–∫—Ç**: –ù–µ—Ç –º–∏–≥–∞—é—â–∏—Ö —Ç–µ–Ω–µ–π –Ω–∞ –º–æ–¥–µ–ª–∏.

---

### 3Ô∏è‚É£ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω camera near plane (—É–±–∏—Ä–∞–µ—Ç z-fighting)

**–ë—ã–ª–æ**:
```javascript
this.camera = new THREE.PerspectiveCamera(50, aspect, 0.1, 1000000);
//                                                     ^^^
//                                                   –°–ª–∏—à–∫–æ–º –±–ª–∏–∑–∫–æ!
```

**–°—Ç–∞–ª–æ**:
```javascript
this.camera = new THREE.PerspectiveCamera(50, aspect, 10, 1000000);
//                                                     ^^
//                                                   –í 100 —Ä–∞–∑ –¥–∞–ª—å—à–µ
```

**–≠—Ñ—Ñ–µ–∫—Ç**: –ù–µ—Ç –º–µ—Ä—Ü–∞–Ω–∏—è –ø–æ–ª–∏–≥–æ–Ω–æ–≤ –ø—Ä–∏ –¥–≤–∏–∂–µ–Ω–∏–∏ –∫–∞–º–µ—Ä—ã.

---

### 4Ô∏è‚É£ –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ shadowMap (—Å–Ω–∏–∂–µ–Ω–∞ –Ω–∞–≥—Ä—É–∑–∫–∞)

**–ë—ã–ª–æ**:
```javascript
keyLight.shadow.mapSize.width = 4096;   // –°–ª–∏—à–∫–æ–º –≤—ã—Å–æ–∫–æ–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ
keyLight.shadow.mapSize.height = 4096;  // ‚Üí –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã –Ω–∞ —Å–ª–∞–±—ã—Ö GPU
```

**–°—Ç–∞–ª–æ**:
```javascript
keyLight.shadow.mapSize.width = 2048;   // –û–ø—Ç–∏–º–∞–ª—å–Ω–æ –¥–ª—è –∫–∞—á–µ—Å—Ç–≤–∞
keyLight.shadow.mapSize.height = 2048;  // ‚Üí –º–µ–Ω—å—à–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤
```

**–≠—Ñ—Ñ–µ–∫—Ç**: –õ—É—á—à–∞—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å, –º–µ–Ω—å—à–µ FPS-–ø—Ä–æ—Å–µ–¥–∞–Ω–∏–π.

---

## üéõÔ∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —è—Ä–∫–æ—Å—Ç—å—é —á–µ—Ä–µ–∑ GUI

### –ï—Å–ª–∏ –≤—Å—ë –µ—â—ë —Å–ª–∏—à–∫–æ–º —è—Ä–∫–æ/—Ç–µ–º–Ω–æ:

1. –û—Ç–∫—Ä–æ–π—Ç–µ **GUI-–ø–∞–Ω–µ–ª—å** (—Å–ø—Ä–∞–≤–∞-—Å–≤–µ—Ä—Ö—É)
2. –†–∞—Å–∫—Ä–æ–π—Ç–µ –ø–∞–ø–∫—É **Rendering**
3. –î–≤–∏–≥–∞–π—Ç–µ —Å–ª–∞–π–¥–µ—Ä **Exposure**:
   - **0.6** ‚Äî —Ç—ë–º–Ω–æ (–¥–ª—è —Å–≤–µ—Ç–ª—ã—Ö —Ñ–æ–Ω–æ–≤)
   - **0.8** ‚Äî –Ω–æ—Ä–º–∞–ª—å–Ω–æ ‚úÖ **–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é**
   - **1.0** ‚Äî —è—Ä–∫–æ (–¥–ª—è –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–π)
   - **1.2** ‚Äî –æ—á–µ–Ω—å —è—Ä–∫–æ (–¥–ª—è —Ç—ë–º–Ω—ã—Ö —Ñ–æ–Ω–æ–≤)

### –ï—Å–ª–∏ –æ—Å—Ç–∞–ª–∏—Å—å –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã (–æ—á–µ–Ω—å —Ä–µ–¥–∫–æ):

**–°–∏–º–ø—Ç–æ–º—ã**: –ú–µ—Ä—Ü–∞—é—â–∏–µ –ø—è—Ç–Ω–∞ –Ω–∞ –º–æ–¥–µ–ª–∏ –ø—Ä–∏ –¥–≤–∏–∂–µ–Ω–∏–∏ –∫–∞–º–µ—Ä—ã

**–†–µ—à–µ–Ω–∏–µ**:
```javascript
// –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12) –∏ –≤–≤–µ–¥–∏—Ç–µ:
const keyLight = configurator.sceneManager.keyLight;
keyLight.shadow.bias = -0.002;        // –£–≤–µ–ª–∏—á–∏—Ç—å bias
keyLight.shadow.normalBias = 0.1;     // –£–≤–µ–ª–∏—á–∏—Ç—å normalBias
```

---

## üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –¥–æ/–ø–æ—Å–ª–µ

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ë—ã–ª–æ | –°—Ç–∞–ª–æ | –≠—Ñ—Ñ–µ–∫—Ç |
|----------|------|-------|--------|
| **Exposure** | 1.0 | 0.8 | -20% —è—Ä–∫–æ—Å—Ç–∏ |
| **Shadow Bias** | -0.0001 | -0.001 | –ù–µ—Ç –º–µ—Ä—Ü–∞–Ω–∏—è |
| **Normal Bias** | 0 | 0.05 | –ù–µ—Ç shadow acne |
| **Camera Near** | 0.1 | 10 | –ù–µ—Ç z-fighting |
| **Shadow Map** | 4096√ó4096 | 2048√ó2048 | -75% VRAM |
| **Shadow Near** | 1 | 100 | –ù–µ—Ç –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤ |

---

## üîç –¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ

### –ß—Ç–æ —Ç–∞–∫–æ–µ z-fighting?

**–ü—Ä–æ–±–ª–µ–º–∞**: –î–≤–∞ –ø–æ–ª–∏–≥–æ–Ω–∞ –Ω–∞ –æ–¥–∏–Ω–∞–∫–æ–≤–æ–º —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–∏ –æ—Ç –∫–∞–º–µ—Ä—ã "–±–æ—Ä—é—Ç—Å—è" –∑–∞ –ø–∏–∫—Å–µ–ª–∏ ‚Üí –º–µ—Ä—Ü–∞–Ω–∏–µ.

**–ü—Ä–∏—á–∏–Ω—ã**:
1. Camera near plane —Å–ª–∏—à–∫–æ–º –±–ª–∏–∑–∫–æ (0.1)
2. Camera far plane —Å–ª–∏—à–∫–æ–º –¥–∞–ª–µ–∫–æ (1000000)
3. –ú–∞–ª–∞—è —Ä–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É near –∏ far ‚Üí –Ω–∏–∑–∫–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å depth buffer

**–†–µ—à–µ–Ω–∏–µ**: –£–≤–µ–ª–∏—á–∏—Ç—å near –¥–æ 10 (—Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ near:far = 1:100000 –≤–º–µ—Å—Ç–æ 1:10000000)

### –ß—Ç–æ —Ç–∞–∫–æ–µ shadow bias?

**–ü—Ä–æ–±–ª–µ–º–∞**: –¢–µ–Ω—å —Å–∞–º–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –Ω–∞ —Å–∞–º–æ–º –æ–±—ä–µ–∫—Ç–µ ‚Üí "shadow acne" (—É–≥—Ä–µ–≤–∞—è —Å—ã–ø—å —Ç–µ–Ω–µ–π).

**Bias**: –°–º–µ—â–∞–µ—Ç —Ç–µ–Ω—å –æ—Ç –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–∏ –Ω–∞ –Ω–µ–±–æ–ª—å—à–æ–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ.
- **–°–ª–∏—à–∫–æ–º –º–∞–ª–æ** (-0.0001) ‚Üí shadow acne (–ø—è—Ç–Ω–∞)
- **–°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ** (-0.01) ‚Üí "peter panning" (–æ—Ç—Ä—ã–≤ —Ç–µ–Ω–µ–π –æ—Ç –æ–±—ä–µ–∫—Ç–∞)
- **–û–ø—Ç–∏–º–∞–ª—å–Ω–æ** (-0.001) ‚Üí —á–∏—Å—Ç—ã–µ —Ç–µ–Ω–∏

**Normal Bias**: –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ —Å–º–µ—â–µ–Ω–∏–µ –≤–¥–æ–ª—å –Ω–æ—Ä–º–∞–ª–∏ –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–∏.
- **0** ‚Üí –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã –Ω–∞ –∏–∑–æ–≥–Ω—É—Ç—ã—Ö –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç—è—Ö
- **0.05** ‚Üí —á–∏—Å—Ç—ã–µ —Ç–µ–Ω–∏ –Ω–∞ –≤—Å–µ—Ö –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç—è—Ö

---

## üéØ –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è

### –î–ª—è —Å—Ç—É–¥–∏–π–Ω–æ–≥–æ –æ—Å–≤–µ—â–µ–Ω–∏—è:
```javascript
exposure: 0.8
keyIntensity: 0.8
fillIntensity: 0.6
ambientIntensity: 0.6
shadowBias: -0.001
normalBias: 0.05
```

### –î–ª—è —è—Ä–∫–æ–π –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–∏:
```javascript
exposure: 1.0
keyIntensity: 1.0
fillIntensity: 0.7
ambientIntensity: 0.8
shadowBias: -0.001
normalBias: 0.05
```

### –î–ª—è —Ç—ë–º–Ω–æ–≥–æ —Ñ–æ–Ω–∞:
```javascript
exposure: 1.2
keyIntensity: 1.2
fillIntensity: 0.4
ambientIntensity: 0.3
shadowBias: -0.001
normalBias: 0.05
```

---

## üö® –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã –æ—Å—Ç–∞–ª–∏—Å—å

### –ó–∞—Å–≤–µ—Ç–∫–∞ –≤—Å—ë –µ—â—ë –µ—Å—Ç—å

1. **–°–Ω–∏–∑—å—Ç–µ Exposure** –≤ GUI ‚Üí `0.6` –∏–ª–∏ `0.7`
2. **–°–Ω–∏–∑—å—Ç–µ Key Light** ‚Üí `0.6`
3. **–°–Ω–∏–∑—å—Ç–µ Ambient** ‚Üí `0.4`

### –ê—Ä—Ç–µ—Ñ–∞–∫—Ç—ã –≤—Å—ë –µ—â—ë –º–µ—Ä—Ü–∞—é—Ç

1. **–£–≤–µ–ª–∏—á—å—Ç–µ shadow bias** ‚Üí `-0.002` –∏–ª–∏ `-0.005`
2. **–£–≤–µ–ª–∏—á—å—Ç–µ normal bias** ‚Üí `0.1`
3. **–£–º–µ–Ω—å—à–∏—Ç–µ shadowMap** ‚Üí `1024√ó1024` (–µ—Å–ª–∏ GPU —Å–ª–∞–±–∞—è)
4. **–û—Ç–∫–ª—é—á–∏—Ç–µ —Ç–µ–Ω–∏** ‚Üí `renderer.shadowMap.enabled = false` (–∫–æ–Ω—Å–æ–ª—å)

### –ú–æ–¥–µ–ª—å "–ø—Ä—ã–≥–∞–µ—Ç" (jittering)

**–ü—Ä–∏—á–∏–Ω–∞**: Camera near plane —Å–ª–∏—à–∫–æ–º –¥–∞–ª–µ–∫–æ (10) ‚Üí –∫–∞–º–µ—Ä–∞ –Ω–µ –≤–∏–¥–∏—Ç –±–ª–∏–∑–∫–∏–µ –æ–±—ä–µ–∫—Ç—ã.

**–†–µ—à–µ–Ω–∏–µ**: –ï—Å–ª–∏ –Ω—É–∂–Ω–æ –±–ª–∏–∑–∫–æ –ø–æ–¥–æ–π—Ç–∏ –∫ –º–æ–¥–µ–ª–∏:
```javascript
// –í –∫–æ–Ω—Å–æ–ª–∏ (F12):
configurator.sceneManager.camera.near = 5;
configurator.sceneManager.camera.updateProjectionMatrix();
```

---

## üìö –°–≤—è–∑–∞–Ω–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

**–§–∞–π–ª**: `SceneManager.js`

**–ó–∞ –æ—Å–≤–µ—â–µ–Ω–∏–µ –æ—Ç–≤–µ—á–∞—é—Ç**:
- **–°—Ç—Ä–æ–∫–∞ 79**: `renderer.toneMappingExposure` ‚Äî –≥–ª–æ–±–∞–ª—å–Ω–∞—è —è—Ä–∫–æ—Å—Ç—å
- **–°—Ç—Ä–æ–∫–∞ 365**: `keyLight.intensity` ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–π —Å–≤–µ—Ç
- **–°—Ç—Ä–æ–∫–∞ 377**: `keyLight.shadow.bias` ‚Äî –º–µ—Ä—Ü–∞–Ω–∏–µ —Ç–µ–Ω–µ–π
- **–°—Ç—Ä–æ–∫–∞ 378**: `keyLight.shadow.normalBias` ‚Äî shadow acne
- **–°—Ç—Ä–æ–∫–∞ 371**: `keyLight.shadow.camera.near` ‚Äî –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã —Ç–µ–Ω–µ–π
- **–°—Ç—Ä–æ–∫–∞ 57**: `camera.near` ‚Äî z-fighting

**–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ GUI**:
- –ü–∞–ø–∫–∞ **Rendering** ‚Üí **Exposure** (0.1 - 3.0)
- –ü–∞–ø–∫–∞ **Lighting** ‚Üí **Key Light**, **Fill Light**, **Ambient**

---

## ‚úÖ –ò—Ç–æ–≥–æ–≤—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

- ‚úÖ Exposure —Å–Ω–∏–∂–µ–Ω –¥–æ **0.8** (–Ω–µ—Ç –∑–∞—Å–≤–µ—Ç–∫–∏)
- ‚úÖ Shadow bias **-0.001** + normal bias **0.05** (–Ω–µ—Ç –º–µ—Ä—Ü–∞–Ω–∏—è)
- ‚úÖ Camera near **10** (–Ω–µ—Ç z-fighting)
- ‚úÖ Shadow map **2048√ó2048** (–æ–ø—Ç–∏–º–∞–ª—å–Ω–æ)
- ‚úÖ Shadow camera near **100** (—Å—Ç–∞–±–∏–ª—å–Ω—ã–µ —Ç–µ–Ω–∏)

**–¢–µ–ø–µ—Ä—å —Å—Ü–µ–Ω–∞ –≤—ã–≥–ª—è–¥–∏—Ç —á–∏—Å—Ç–æ, –±–µ–∑ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤!** üéâ

---

## üîÑ –ö–∞–∫ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å

```powershell
cd c:\laragon\www\3dcabinet
php artisan serve
```

–û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:8000/app

**–î–æ–ª–∂–Ω—ã –≤–∏–¥–µ—Ç—å**:
1. ‚úÖ –ù–æ—Ä–º–∞–ª—å–Ω–∞—è —è—Ä–∫–æ—Å—Ç—å (–Ω–µ –∑–∞—Å–≤–µ—á–µ–Ω–æ)
2. ‚úÖ –ù–µ—Ç –º–∏–≥–∞—é—â–∏—Ö –ø—è—Ç–µ–Ω –Ω–∞ –º–æ–¥–µ–ª–∏
3. ‚úÖ –ü–ª–∞–≤–Ω–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ –∫–∞–º–µ—Ä—ã –±–µ–∑ "–ø—Ä—ã–∂–∫–æ–≤"
4. ‚úÖ –ß–∏—Å—Ç—ã–µ —Ç–µ–Ω–∏ –±–µ–∑ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤

**–í –∫–æ–Ω—Å–æ–ª–∏** (F12):
```
‚úÖ –†–µ–Ω–¥–µ—Ä–µ—Ä –Ω–∞—Å—Ç—Ä–æ–µ–Ω: exposure: 0.8
üí° Key Light –¥–æ–±–∞–≤–ª–µ–Ω (–º—è–≥–∫–∏–π —Ä–µ–∂–∏–º: 0.8)
```

**–ï—Å–ª–∏ –Ω—É–∂–Ω–æ —Ç–æ—á–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å** ‚Üí –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ GUI-–ø–∞–Ω–µ–ª—å (Rendering ‚Üí Exposure).
