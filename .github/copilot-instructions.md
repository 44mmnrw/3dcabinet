# Инструкции для AI-ассистента — 3Cabinet

## Общая архитектура
- Проект — одностраничный веб-конфигуратор серверного шкафа на Vanilla JS, без сборки и npm-зависимостей.
- Вся логика и данные — на клиенте. Для запуска достаточно открыть `index.php` (или `index.html`, если есть) в браузере.
- Основные компоненты: визуализация 3D (Three.js), каталог оборудования, динамическая отрисовка состояния шкафа, Drag&Drop для размещения.

## Ключевые файлы и директории
- `js/app.js` — инициализация, 3D-рендеринг, обработка событий, состояние приложения.
- `js/data.js` — исходные данные: массив `EQUIPMENT_DATA` (оборудование) и объект `CABINET_CONFIG` (параметры шкафа).
- `css/styles.css` — тема, переменные, стили для всех компонентов.
- `index.php` — структура страницы, подключение стилей и SVG-спрайта.
- `assets/sprite/sprite.svg` — иконки для интерфейса.

## Форматы данных
- Оборудование (`EQUIPMENT_DATA`):
  ```js
  { id, name, description, units, power, weight, depth, category }
  ```
- Установленное оборудование (`installedEquipment` в состоянии):
  ```js
  { equipmentId, position, units }
  ```
- Конфиг шкафа (`CABINET_CONFIG`):
  ```js
  { units, maxWeight, maxPower, ... }
  ```

## Важные паттерны
- Drag&Drop реализован через inline-атрибуты (например, `ondragstart="handleDragStart(event, ...)"`).
- Все функции, связанные с UI и логикой, должны быть доступны глобально (window).
- Рендеринг шкафа и каталог оборудования строятся динамически через JS.
- Проверка возможности размещения — функция `canPlaceEquipment(position, units)`.
- Уведомления — функция `showNotification(type, message)` (type: 'info' | 'success' | 'error').

## Как тестировать
- Откройте `index.php` в браузере или используйте локальный сервер (`npx http-server .`).
- В консоли должен появиться лог инициализации.
- Для добавления оборудования — правьте `EQUIPMENT_DATA` в `js/data.js`.
- Для изменения параметров шкафа — правьте `CABINET_CONFIG`.
- Для изменения темы — редактируйте CSS-переменные в `:root`.

## Важные места для ревью
- Консистентность массива `installedEquipment` (позиции, юниты).
- Логика проверки пересечений и границ (`canPlaceEquipment`).
- Динамическая отрисовка шкафа (`renderCabinet`).
- Inline-события Drag&Drop и клики — при рефакторинге сохраняйте порядок и контекст.

## Ограничения
- Не добавляйте сторонних зависимостей без крайней необходимости.
- Не переводите проект на ES-модули без обновления инструкции запуска.
- При изменении формата данных обновляйте примеры и документацию.

---
Если какая-то часть кода неочевидна — уточните, чтобы добавить схему или пример.
