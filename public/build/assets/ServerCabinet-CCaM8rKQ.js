import{CabinetType as r}from"./CabinetType-BSIXnIWZ.js";import{D as c,E as l,P as n}from"./app-DdhSGyjC.js";import"./react-vendor-OvXVS5lI.js";import"./three-utils-CpVhJydz.js";import"./three-core-Cs1lrHJG.js";/* empty css            */class y extends r{constructor(i){super(i),this.cooling=i.cooling||{hasActiveCooling:!1,coolingCapacity:0,airflowType:"passive",hasHotAisle:!1,hasColdAisle:!1},this.power=i.power||{inputVoltage:l.STANDARD_VOLTAGE_V,phases:c.PHASES,maxPowerDensity:0,redundancy:"none"},this.monitoring=i.monitoring||{hasTemperatureSensors:!1,hasHumiditySensors:!1,hasPowerMetering:!1,hasAccessControl:!1}}validateEquipment(i){const e={valid:!0,errors:[],warnings:[]};if(i.specs&&i.specs.airflowDirection){const o=i.specs.airflowDirection,s=this.cooling.airflowType;o!=="passive"&&s!=="passive"&&o!==s&&e.warnings.push(`Направление воздушного потока оборудования (${o}) не соответствует конфигурации шкафа (${s})`)}if(i.specs&&i.specs.power&&i.mounting){const o=i.mounting.rackUnits||1,s=i.specs.power*n.W_TO_KW/o;s>this.power.maxPowerDensity&&e.warnings.push(`Плотность мощности оборудования (${s.toFixed(2)}кВт/U) превышает рекомендуемую (${this.power.maxPowerDensity}кВт/U)`)}return i.category==="server"&&i.mounting&&i.mounting.rackUnits>4&&e.warnings.push("Высокопрофильное серверное оборудование может ограничить вентиляцию"),e}calculateTypeSpecificMetrics(i){const e={totalPower:0,totalHeatLoad:0,powerDensity:0,coolingRequired:0,coolingAdequacy:"unknown",airflowBalance:"unknown",redundancyStatus:"unknown"};let o=0;i.forEach(t=>{if(t.specs){const a=(t.specs.power||0)*n.W_TO_KW;e.totalPower+=a,e.totalHeatLoad+=t.specs.heatDissipation?t.specs.heatDissipation*n.W_TO_KW:a}t.mounting&&t.mounting.rackUnits&&(o+=t.mounting.rackUnits)}),o>0&&(e.powerDensity=e.totalPower/o),e.coolingRequired=e.totalHeatLoad;const s=this.cooling.coolingCapacity;return s===0?e.coolingAdequacy="none":e.coolingRequired>s?e.coolingAdequacy="insufficient":e.coolingRequired<s*.5?e.coolingAdequacy="oversized":e.coolingAdequacy="adequate",this.cooling.airflowType==="passive"&&e.totalPower>1.5?e.airflowBalance="restricted":this.cooling.hasHotAisle&&this.cooling.hasColdAisle?e.airflowBalance="balanced":e.airflowBalance="moderate",this.power.redundancy==="none"&&e.totalPower>5?e.redundancyStatus="at_risk":this.power.redundancy!=="none"?e.redundancyStatus="ok":e.redundancyStatus="acceptable",e}getConfigurationRecommendations(i){const e=[],o=this.calculateTypeSpecificMetrics(i);return o.coolingAdequacy==="insufficient"?e.push({severity:"error",message:"Недостаточная мощность охлаждения",suggestion:`Требуется ${o.coolingRequired.toFixed(2)}кВт, доступно ${this.cooling.coolingCapacity}кВт`}):o.coolingAdequacy==="none"&&o.totalHeatLoad>1&&e.push({severity:"error",message:"Требуется система активного охлаждения",suggestion:`Тепловая нагрузка: ${o.totalHeatLoad.toFixed(2)}кВт`}),o.powerDensity>this.power.maxPowerDensity&&e.push({severity:"warning",message:"Высокая плотность мощности",suggestion:`${o.powerDensity.toFixed(2)}кВт/U (макс: ${this.power.maxPowerDensity}кВт/U)`}),o.airflowBalance==="restricted"&&e.push({severity:"warning",message:"Ограниченная циркуляция воздуха",suggestion:"Рекомендуется активная система вентиляции или реорганизация Hot/Cold Aisle"}),o.redundancyStatus==="at_risk"&&e.push({severity:"warning",message:"Отсутствует резервирование питания",suggestion:`При мощности ${o.totalPower.toFixed(2)}кВт рекомендуется N+1 или 2N`}),o.totalPower>3&&!this.monitoring.hasTemperatureSensors&&e.push({severity:"info",message:"Рекомендуется установка датчиков температуры",suggestion:"Для критичных серверных конфигураций требуется мониторинг"}),o.totalPower>this.getMaxPower()*n.W_TO_KW&&e.push({severity:"error",message:"Превышена максимальная мощность шкафа",suggestion:`${o.totalPower.toFixed(2)}кВт > ${(this.getMaxPower()*n.W_TO_KW).toFixed(2)}кВт`}),e}hasActiveCooling(){return this.cooling.hasActiveCooling}hasAisleContainment(){return this.cooling.hasHotAisle||this.cooling.hasColdAisle}getPowerRedundancy(){return this.power.redundancy}hasMonitoring(){return this.monitoring.hasTemperatureSensors||this.monitoring.hasPowerMetering}}export{y as ServerCabinet};
